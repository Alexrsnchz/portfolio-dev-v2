---
import SunIcon from "../../../assets/icons/page/SunIcon.astro";
import MoonIcon from "../../../assets/icons/page/MoonIcon.astro";
---

<button id="theme-button" class="cursor-pointer">
    <SunIcon id="light-icon" class="w-5 h-5 text-gray-800 dark:text-gray-200" />
    <MoonIcon id="dark-icon" class="hidden w-5 h-5 text-gray-800 dark:text-gray-200" />
</button>

<script>
    // Obtains button and icons data
    const themeButton = document.getElementById('theme-button');
    const lightIcon = document.getElementById('light-icon');
    const darkIcon = document.getElementById('dark-icon');

    // Obtains the saved theme if exists
    const savedTheme = localStorage.getItem('theme');

    // Applies a theme based on the one saved in the local storage
    if (savedTheme === 'dark') {
        document.documentElement.classList.add('dark');

        lightIcon?.classList.add('hidden');
        darkIcon?.classList.remove('hidden');
    } else if (savedTheme === 'light') {
        document.documentElement.classList.remove('dark');

        lightIcon?.classList.remove('hidden');
        darkIcon?.classList.add('hidden');
    }

    // Changes theme when the button is clicked
    themeButton?.addEventListener('click', () => {
        const isDark = document.documentElement.classList.toggle('dark');

        lightIcon?.classList.toggle('hidden');
        darkIcon?.classList.toggle('hidden');

        localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });
</script>